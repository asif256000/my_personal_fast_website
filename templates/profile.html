{% extends "base.html" %}

{% block heading %}
    {{ basic_info.name.split(" ")[0] }}'s Profile
{% endblock %}

{% block content %}
    <div class="container">
    <button id="sidebar-toggle">â˜°</button>
        <div id="sidebar" class="sidebar" style="margin-left: 10px;">
            <h2>Jump To...</h2>
            <ul>
                <li><a href="#experience">Experience</a></li>
                <li><a href="#education">Education</a></li>
                <li><a href="#skills">Skills</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#certifications">Certifications</a></li>
                <li><a href="#honors_and_awards">Honors and Awards</a></li>
                <li><a href="#interests">Interests</a></li>
                <li><a href="#resume">Resume</a></li>
            </ul>
        </div>

        <div class="main-content">
            {# <button type="button" data-toggle="collapse" data-target="#intro">Intro</button> #}
            <section id="intro"> {# class="collapse show"> #}
            <table>
            <tr>
            <td style="padding: 10px;"><img src="{{ url_for('static', path='image.jpg') }}" alt="{{ basic_info.name }}" style="width: 100vw;"></td>
            <td style="padding: 10px;"><p>Hi there, I am {{ basic_info.name}}, currently living in {{ basic_info.location }}.
                You can email me at <a href="mailto:"+{{ basic_info.email }}>{{ basic_info.email }}</a> or call/ text at <a href="tel:"+{{ basic_info.phone }}>{{ basic_info.phone }}</a>.
                Thank you for visiting <a href="{{ url_for('home') }}">my website</a>, but don't forget to check out my <a href="{{ basic_info.github }}">GitHub</a> 
                and <a href="{{ basic_info.linkedin }}">LinkedIn</a> profiles.
                <br><br>
                {{ basic_info.intro|safe }}
                </p></td>
            </tr>
            </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            {# TODO:Merge Education and Experience into one section and put a straight line as timeline. Left for exp, right for edu. #}
            <section id="experience">
                <h2>Experience</h2>
                <table>
                <tbody>
                    {% for exp in experience %}
                        <tr style="padding: 10px;">
                        <td style="padding: 10px;"><img src="{{ url_for('static', path='/logos/' + exp.company_logo) }}" alt="{{ exp.company }}" style="width: 100px;"></td>
                        <td style="padding: 10px; max-width: 75vw;"><p>Worked at <b>{{ exp.company }}</b> located at <i>{{ exp.location }}</i> as a <b>{{ exp.title }}</b> from <b>{{ exp.duration_start.strftime("%Y-%m-%d") }}</b>{{ (" till <b>" + exp.duration_end.strftime("%Y-%m-%d") + "</b>" if exp.duration_end else " till date") | safe }}.</p></td>
                        </tr>
                        <tr style="padding: 10px;">
                        <td>Achievements &<br>Responsibilities:</td>
                        <td style="padding: 10px; max-width: 90vw;">
                        <p>
                        {% for resp_head, resp_desc in exp.description %}
                            &bull; <b>{{ resp_head}}: </b> {{ resp_desc }}
                            <br>
                        {% endfor %}
                        </p>
                        </td>
                        </tr>
                    {% endfor %}
                </tbody>
                </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            <section id="education">
                <h2>Education</h2>
                <table>
                <tbody>
                    {% for edu in education %}
                        <tr style="padding: 10px;">
                        <td style="padding: 10px;"><img src="{{ url_for('static', path='/logos/' + edu.institution_logo) }}" alt="{{ edu.institution }}" style="width: 100px;"></td>
                        <td style="padding: 10px; max-width: 75vw;"><p>Studied at <b>{{ edu.institution }}</b> located at <i>{{ edu.location }}</i>. <b>{{ edu. degree }}</b> in <b>{{ edu.major }}</b>
                        {{ (" with specialization in <i>" + edu.minor + "</i>" if edu.minor else "") | safe }} from <b>{{ edu.duration_start.strftime("%Y-%m-%d") }}</b> to 
                        <b>{{ edu.duration_end.strftime("%Y-%m-%d") if edu.duration_end < curr_date else edu.duration_end.strftime("%Y-%m-%d")+" (Expected)" }}</b>. 
                        {{ "Final grade" if edu.duration_end < curr_date else "Grade so far"}} is <b>{{ edu.gpa }}</b> and some of the courses completed are <i>{{ edu.courses}}</i>.</p></td>
                        </tr>
                    {% endfor %}
                </tbody>
                </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            <section id="skills">
                <h2>Skills</h2>
                <table>
                <tbody>
                    {% for skill_category, all_skills in skills.items() %}
                        {% set adv_skills = ", ".join(all_skills.get("Advanced", [])) %}
                        {% set int_skills = ", ".join(all_skills.get("Intermediate", [])) %}
                        {% set beg_skills = ", ".join(all_skills.get("Beginner", [])) %}
                        <tr>
                        <td style="padding-right: 10px;"><b>{{ skill_category }}</b></td>
                        <td style="padding-left: 10px; max-width: 75vw;">
                        <p style="opacity: 1;">{{ adv_skills }}</p>
                        <p style="opacity: 0.75;">{{ int_skills }}</p>
                        <p style="opacity: 0.5;">{{ beg_skills }}</p>
                        </td>
                        </tr>
                    {% endfor %}
                </tbody>
                </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            <section id="projects">
                <h2>Projects</h2>
                <table>
                <tbody>
                    {% for proj in projects %}
                        <tr style="padding: 10px;">
                        <td style="padding: 10px; max-width: 20vw;">{{ proj.title }}</td>
                        <td style="padding: 10px; max-width: 50vw;"><p>{{ proj.description }}</p></td>
                        <td style="padding: 10px; max-width: 30vw;">Link: <a href="{{ proj.link }}">{{ proj.link }}</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
                </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            <section id="certifications">
                <h2>Certifications</h2>
                <table>
                <tbody>
                    {% for cert in certifications %}
                        <tr style="padding: 10px;">
                        <td style="padding: 10px; max-width: 20vw;"><b>{{ cert.title }}</b> issued by {{ cert.issuer }}</td>
                        <td style="padding: 10px; max-width: 50vw;"><p>{{ cert.description }}</p></td>
                        <td style="padding: 10px; max-width: 25vw;"><p><a href="{{ cert.link }}">Certificate</a> received on <b>{{ cert.achievement_date.strftime("%Y-%m-%d") }}</b></p></td>
                        </tr>
                    {% endfor %}
                </tbody>
                </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            <section id="honors_and_awards">
                <h2>Honors and Awards</h2>
                <table>
                <tbody>
                    {% for hna in honors_and_awards %}
                        <tr style="padding: 10px;">
                        <td style="padding: 10px; max-width: 25vw"><b>{{ hna.title }}</b></td>
                        <td style="padding: 10px; max-width: 55vw;">{{ hna.description }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
                </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            <section id="interests">
                <h2>Interests</h2>
                <table>
                <tbody>
                    {% for int_subcategory, ints in interests.items() %}
                        {% set cat_ints = ", ".join(ints) %}
                        <tr style="padding: 10px;">
                        <td style="padding: 10px;"><b>{{ int_subcategory }}</b></td>
                        <td style="padding: 10px; max-width: 70vw;">{{ cat_ints }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
                </table>
            </section>
            <hr style="max-width: 50vw; margin-left: 0; opacity: 0.5;">

            <section id="resume">
                <h2>Resume</h2>
                {% set resume_path = resume[0].file_path %}
                <a href="{{ url_for('static', path=resume_path) }}" download style="display: inline-block; width: 70vw; padding-top: 15px; padding-bottom: 10px; text-align: center; background-color: #7d7d7d; color: white; text-decoration: none;">Download Resume</a>
                <br>
                <object data="{{ url_for('static', path= resume_path ) }}" type="application/pdf" style="width: 70vw; height: 1000px;">
                    <embed src="{{ url_for('static', path= resume_path ) }}" type="application/pdf">
                </object>
            </section>

        </div>
    </div>
    <script>
        document.getElementById('sidebar-toggle').addEventListener('click', function() {
            var sidebar = document.getElementById('sidebar');
            var wrapperContent = document.getElementById('wrapper');
            sidebar.classList.toggle('open');
            wrapperContent.classList.toggle('open');
        });
        window.onload = function() {
            var wrapper = document.getElementsByClassName('container')[0];
            var anchors = wrapper.getElementsByTagName('a');
            for (var i = 0; i < anchors.length; i++) {
                anchors[i].setAttribute('target', '_blank');
            }
        };
    </script>
    {# <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script> #}
{% endblock %}
